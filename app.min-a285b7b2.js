"use strict";function config(n){n.when("/destinationgroups",{templateUrl:"sections/destinationgroups/destinationgroups.tpl.html",controller:"DestinationGroupsController as destinationgroups",resolve:{destinationGroups:["DestinationsService",function(n){return n.getDestinationGroupsWithPrices()}]}}).when("/about",{templateUrl:"sections/about/about.tpl.html",controller:"AboutController as about"}).when("/destinationgroup/:id",{templateUrl:"sections/destinationgroup/destinationgroup.tpl.html",controller:"DestinationGroupController as destinationgroup",resolve:{destinationGroup:["DestinationsService","$route",function(n,t){return n.getDestinationGroupWithPrices(t.current.params.id)}],priceProviders:["DestinationsService","$route",function(n){return n.getPriceProviders()}]}}).when("/destination/:id/month/:month",{templateUrl:"sections/destination/destination.tpl.html",controller:"DestinationController as destination",resolve:{destination:["DestinationsService","$route",function(n,t){return n.getDestinationMonthPrices(t.current.params.id,t.current.params.month)}],priceProviders:["DestinationsService","$route",function(n){return n.getPriceProviders()}],month:["DestinationsService","$route",function(n,t){return t.current.params.month}]}}).otherwise({redirectTo:"/destinationgroups"})}function configs(n){var t=function(n,t,e){function o(n){return 401===n.status?t.error("You are unauthorised to access the requested resource (401)"):404===n.status?t.error("The requested resource could not be found (404)"):500===n.status&&t.error("Internal server error (500)"),e.reject(n)}function i(n){return n}return function(n){return n.then(i,o)}};t.$inject=["$location","$log","$q"],n.interceptors.push(t)}function runs(n,t){n.$on("$routeChangeStart",function(){t.loading=!0}),n.$on("$routeChangeSuccess",function(){t.loading=!1})}function dataService(n,t,e,o,i){function r(t,o){console.log("requesting : "+t);var i=e+t;return angular.forEach(o,function(n,t){i=i+"&"+t+"="+n}),n({url:i,method:"GET",headers:{"Content-Type":"application/json"},cache:!0}).then(function(n){return n.data}).catch(h)}function a(){return o}function s(){return r("destination-groups.json",{}).then(function(n){return n})}function c(n,e){var i={};for(var a in o){var s=r(a+"-"+n+".json",{});i[a]=s}return t.all(i).then(function(n){e.bestPrice=priceUtils.bestPriceIn(n),e.destinationPricesPerMonth=priceUtils.destinationPricesPerMonth(n,e);for(var t in e.destinations)e.destinations[t].prices=e.destinationPricesPerMonth[t];e.months=priceUtils.monthsIn(n),console.log(e)}),e}function u(){return s().then(function(n){for(var t in n)n[t]=c(t,n[t]);return n})}function d(){return null===g&&(g=u()),g}function l(n){return d().then(function(t){return t[n]})}function p(n){return d().then(function(t){for(var e in t)for(var o in t[e].destinations)if(o==n){var i=t[e].destinations[o];return i}})}function h(n){return i.error("XHR Failed for DestinationsService"),i.error(n),n}var m={getDestinationGroupsWithPrices:d,getDestinationGroupWithPrices:l,getPriceProviders:a,getDestinationMonthPrices:p},g=null;return m}function ngEnter(){return function(n,t,e){t.bind("keydown keypress",function(t){13===t.which&&(n.$apply(function(){n.$eval(e.ngEnter)}),t.preventDefault())})}}angular.module("app.routes",["ngRoute"]).config(config),config.$inject=["$routeProvider"],angular.module("app.config",[]).config(configs).run(runs),configs.$inject=["$httpProvider"],runs.$inject=["$rootScope","PageValues"],angular.module("app.core",[]),angular.module("app.services",[]),angular.module("app",["ngRoute","ngAnimate","angularMoment","angular-preload-image","truncate","app.routes","app.core","app.services","app.config","app.templates"]),angular.module("app.core").filter("toArray",function(){return function(n){return n instanceof Object?_.map(n,function(n,t){return Object.defineProperty(n,"$key",{__proto__:null,value:t})}):n}}),angular.module("app.core").controller("DestinationGroupsController",["$scope","PageValues","destinationGroups",function(n,t,e){t.title="DESTINOS",t.description="Precios para los destinos mas populares.";var o=this;o.groups=e}]),angular.module("app.core").controller("DestinationGroupController",["$scope","PageValues","destinationGroup","priceProviders",function(n,t,e,o){t.title="DESTINOS",t.description="Precios para los destinos mas populares.";var i=this;i.destinationGroup=e,i.priceProviders=o}]),angular.module("app.core").controller("DestinationController",["$scope","PageValues","destination","priceProviders","month",function(n,t,e,o,i){t.title="Vuelos a "+e.name,t.description="Precios para el mes "+i;var r=this;r.destination=e,r.priceProviders=o,r.month=i}]),angular.module("app.core").controller("BarController",["$scope","PageValues",function(n,t){var e=this;e.data=t}]),angular.module("app.services").constant("GIST_BASE_URL","https://gist.githubusercontent.com/vuelos5555/9efcd73c934bce3b0375eea36f9f077e/raw/").constant("PRICE_PROVIDERS",{lan:{name:"Latam"},almundo:{name:"Al Mundo"},turismocity:{name:"Turismo City"}}).factory("DestinationsService",dataService),dataService.$inject=["$http","$q","GIST_BASE_URL","PRICE_PROVIDERS","$log","moment"],angular.module("app.core").value("PageValues",{title:null,description:null,loading:!1}),angular.module("app.core").directive("ngEnter",ngEnter),function(n){try{n=angular.module("app.templates")}catch(t){n=angular.module("app.templates",[])}n.run(["$templateCache",function(n){n.put("sections/destination/destination.tpl.html",'<div class="home-frame">\n    <div class="home-banner">\n        <div class="container inner">\n            <h1>Vuelo <span>5555</span></h1>\n            <h2>Encontra los mejores precios por fecha a los destinos mas populares.</h2>\n        </div>\n    </div>\n    <div class="clearbanner"></div>\n    <div class="destinations-title">\n        <div class="container">\n            DESTINOS\n        </div>\n    </div>\n    <div class="container">\n        <div class="container-table">\n            <h2 class="tabletitle">Precios de vuelos a {{destination.destination.name}} desde Buenos Aires</h2>\n            <table class="table">\n                <thead>\n                <tr>\n                  <th scope="col">Destino</th>\n                  <th scope="col">Desde</th>\n                  <th scope="col">Hasta</th>\n                  <th scope="col">Precio</th>\n                  <th scope="col">Sitio</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr data-ng-repeat="entry in destination.destination.prices[destination.month].all | orderBy:[ \'amount\', \'date_from\', \'date_to\']">\n                  <th scope="row">{{destination.destination.name}}</th>\n                  <td>{{entry.date_from}}</td>\n                  <td>{{entry.date_to}}</td>\n                  <td class="{{entry.deltaWithBestMonthPrice}}">\n                    <a href="{{entry.externalUrl}}" target="_blank">\n                      {{entry.amount_str}}\n                    </a>\n                  </td>\n                  <td>\n                    <a href="{{entry.externalUrl}}" target="_blank">\n                      {{destination.priceProviders[entry.provider].name}}\n                    </a>\n                  </td>\n                </tr>\n                </tbody>\n            </table>    \n        </div>\n    </div>\n</div>')}])}(),function(n){try{n=angular.module("app.templates")}catch(t){n=angular.module("app.templates",[])}n.run(["$templateCache",function(n){n.put("sections/destinationgroup/destinationgroup.tpl.html",'<div class="home-frame">\n    <div class="home-banner">\n        <div class="container inner">\n            <h1>Vuelo <span>5555</span></h1>\n            <h2>Encontra los mejores precios por fecha a los destinos mas populares.</h2>\n        </div>\n    </div>\n    <div class="clearbanner"></div>\n    <div class="destinations-title">\n        <div class="container">\n            DESTINOS\n        </div>\n    </div>\n    <div class="container">\n        <div class="container-table">\n            <h2 class="tabletitle">Precios de vuelos a {{destinationgroup.destinationGroup.name}} desde Buenos Aires</h2>\n            <table class="table">\n                <thead>\n                <tr>\n                  <th scope="col">Destino</th>\n                  <th scope="col" data-ng-repeat="(month, ignore) in destinationgroup.destinationGroup.months | orderBy:month">\n                    {{month}}\n                  </th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr data-ng-repeat="(destCode, destination) in destinationgroup.destinationGroup.destinations" >\n                  <th scope="row">{{destination.name}}</th>\n                  <td data-ng-repeat="(month, ignore) in destinationgroup.destinationGroup.months | orderBy:month" class="{{destinationgroup.destinationGroup.destinationPricesPerMonth[destCode][month].cheapest.deltaWithBestGroupPrice}}">\n                    <a href="#/destination/{{destCode}}/month/{{month}}">\n                    {{destinationgroup.destinationGroup.destinationPricesPerMonth[destCode][month].cheapest.amount_str}}\n                     ({{destinationgroup.priceProviders[destinationgroup.destinationGroup.destinationPricesPerMonth[destCode][month].cheapest.provider].name}})\n                   </a>\n                  </td>\n                </tr>\n                </tbody>\n            </table>    \n        </div>\n    </div>\n</div>')}])}(),function(n){try{n=angular.module("app.templates")}catch(t){n=angular.module("app.templates",[])}n.run(["$templateCache",function(n){n.put("sections/destinationgroups/destinationgroups.tpl.html",'<div class="home-frame">\n    <div class="home-banner">\n        <div class="container inner">\n            <h1>Vuelo <span>5555</span></h1>\n            <h2>Encontra los mejores precios por fecha a los destinos mas populares.</h2>\n        </div>\n    </div>\n    <div class="clearbanner"></div>\n    <div class="destinations-title">\n        <div class="container">\n            DESTINOS\n        </div>\n    </div>\n    <div class="container">\n        <ul class="destinationgroups">\n            <li data-ng-repeat="(id, destinationGroup) in destinationgroups.groups track by $index" data-ng-class="{\'offline\': (destinationGroup.link == \'#\')}">\n                <div class="picture">\n                    <img class="picture" ng-src="assets/images/{{id}}.jpg">\n                </div>\n                <p class="destination-name">{{destinationGroup.name}}</p>\n                <p>{{destinationGroup.bestPrice.amount_str}} ({{destinationGroup.destinations[destinationGroup.bestPrice.destination].name}} - {{destinationGroup.bestPrice.month}})</p>\n                <a href="#/destinationgroup/{{id}}" data-ng-class="{\'disabled\': (destinationGroup.link == \'#\')}" class="btn btn-lg btn-primary"><span class="icon icon-arrow-up-right5"></span> View</a>\n                <div class="clearfix"></div>\n            </li>\n        </ul>\n        <p class="no-data destinations">Mas destinos pronto...</p>\n    </div>\n</div>\n')}])}();